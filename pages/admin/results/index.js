import Head from 'next/head';
import styles from '../../../styles/admin/Result.module.css';
import SideBarMenu from '../../../components/admin/SideBarMenu';
import Candidate from '../../../components/admin/Results/Candidates';
import useCandidate from '../../../hooks/useCandidate';
import CandidateContext from '../../../store/CandidateContext';

export default function Home() {
  const { candidateList, deleteCandidateHandler } = useCandidate();

  return (
    <CandidateContext.Provider
      value={{
        candidateList,
        deleteCandidateHandler,
      }}
    >
      <Head>
        <title>Recruit Test</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
        <link
          rel='stylesheet'
          href='https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css'
          integrity='sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS'
          crossOrigin='anonymous'
        />
        <link
          rel='stylesheet'
          href='https://pro.fontawesome.com/releases/v5.10.0/css/all.css'
          integrity='sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p'
          crossOrigin='anonymous'
        />
      </Head>
      <SideBarMenu />

      {candidateList && (
        <div className={styles.mainBlock}>
          <h1 className='pageTitle'>RESULTS</h1>
          <ul className={[`${styles.resultArea}`]}>
            <li className={[`row ${styles.itemTitles}`]}>
              <div className='col-2'>Date</div>
              <div className='col-1'>ID</div>
              <div className='col-2'>First Name</div>
              <div className='col-2'>Last Name</div>
              <div className='col-2'>Email</div>
              <div className='col-1'>Score</div>
              <div className='col-2'>Action</div>
            </li>
            {candidateList.map((candidate, i) => (
              <Candidate
                key={i}
                id={candidate.id}
                firstname={candidate.firstname}
                lastname={candidate.lastname}
                score={candidate.score}
                email={candidate.email}
                date={candidate.test_date}
              />
            ))}
          </ul>
        </div>
      )}
    </CandidateContext.Provider>
  );
}
